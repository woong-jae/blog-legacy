---
title: "Indexing Structures for Files"
date: "2021-12-01 21:49"
emoji: "ğŸ‘‰"
category: "db"
---
> Indexing structureëŠ” íŒŒì¼ì´ ì´ë¯¸ ì–´ë–¤ primary organizationìœ¼ë¡œ ì¡´ì¬í•œë‹¤ê³  ê°€ì •í•œë‹¤.

'Indexes'(ìƒ‰ì¸)ì€ íŠ¹ì • ê²€ìƒ‰ ì¡°ê±´ì— ëŒ€í•´ ë ˆì½”ë“œë¥¼ ë¹ ë¥´ê²Œ ì°¾ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤.

'Index structures' ëŠ” secondary access path(ë³´ì¡° ì ‘ê·¼ ê²½ë¡œ)ë¥¼ ì œê³µí•´ì£¼ëŠ” ë””ìŠ¤í¬ì˜ ì¶”ê°€ì ì¸ íŒŒì¼ë¡œ, 
**primary ë°ì´í„° íŒŒì¼ì˜ ë¬¼ë¦¬ì ì¸ ìœ„ì¹˜ì— ì˜í–¥ì„ ì£¼ì§€ì•Šê³  ë ˆì½”ë“œì— ì ‘ê·¼**í•  ìˆ˜ ìˆëŠ” ëŒ€ì²´ì ì¸ ë°©ë²•ì„ ì œê³µí•œë‹¤.

Index structureëŠ” indexing fieldì— ëŒ€í•œ íš¨ìœ¨ì ì¸ ë ˆì½”ë“œ ì ‘ê·¼ì„ ê°€ëŠ¥í•˜ê²Œ í•œë‹¤. ì—¬ê¸°ì„œ indexing fieldëŠ” ë ˆì½”ë“œì˜ ì–´ëŠ í•„ë“œë‚˜ ì‚¬ìš©ê°€ëŠ¥í•˜ë‹¤. Multiple fieldì— ëŒ€í•œ indexë„ ìƒì„±ê°€ëŠ¥í•˜ë‹¤.

ëŒ€ë¶€ë¶„ì˜ indexëŠ” ordered files ê·¸ë¦¬ê³  íŠ¸ë¦¬ ìë£Œêµ¬ì¡°ì— ë°”íƒ•ì„ ë‘”ë‹¤.

## Single-Level Ordered Indexes
Ordered index(ì •ë ¬ ìƒ‰ì¸)ì€ ì¤‘ìš”í•œ ì¡°ê±´ì„ ìˆœì„œëŒ€ë¡œ ì •ë ¬í•´ì„œ ì°¾ê¸° ì‰½ê²Œí•˜ëŠ” ê²ƒì´ ëª©í‘œë‹¤. ì¤‘ìš”í•œ ì¡°ê±´ì„ 'indexing field'ë¼ê³  í•œë‹¤.
Index fieldê°€ ì •ë ¬ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— **binary searchë¥¼ ì´ìš©í•œ ë¹ ë¥¸ íƒìƒ‰ì´ ê°€ëŠ¥**í•˜ë‹¤.

Index fileì€ 'Index fieldì˜ ê° ê°’ + ê·¸ ë ˆì½”ë“œë¥¼ ê°€ì§„ blockì— ëŒ€í•œ í¬ì¸í„°'ì˜ ë¦¬ìŠ¤íŠ¸ë¥¼ ë³´ê´€í•œë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì¼ë°˜ì ìœ¼ë¡œ ë°ì´í„° íŒŒì¼ì— ë¹„í•´ í¬ê¸°ê°€ í›¨ì”¬ ì‘ë‹¤.

### Primary Index (ì£¼ìš” ìƒ‰ì¸)
ë ˆì½”ë“œì˜ ì •ë ¬ëœ íŒŒì¼ë“¤ì˜ **ordering key field**ì— ëŒ€í•œ ìƒ‰ì¸ì´ë‹¤.

Primary indexì˜ index recordëŠ” ë‘ ê°€ì§€ fieldë¥¼ ê°–ëŠ”ë‹¤.
- **Primary key**(block anchor): Blockì˜ ì²« ë ˆì½”ë“œì˜ primary key fieldì˜ ê°’
- **Pointer to disk block**

Primary indexëŠ” ë°ì´í„° íŒŒì¼ì˜ ë ˆì½”ë“œë“¤ë³´ë‹¤ 1)ì ì€ index entryë¥¼ ê°€ì§€ê³ , 2)fieldì˜ ìˆ˜ì™€ ê°’ë„ ì‘ê¸° ë•Œë¬¸ì— ê³µê°„ì„ í›¨ì”¬ ì ê²Œ ì‚¬ìš©í•œë‹¤.

![Primary Index](https://lh3.googleusercontent.com/proxy/xiulOqcKCp8ZIqZdJBLBPk-dnHH5zoMvzBnX-z03hmQF1PlijnyGtDKkf2As0xfJh1E8gzqUm1L1Le8_BD1yV8Mthh9Sxd6lGg)

> **Dense index**ëŠ” ëª¨ë“  key valueì— ëŒ€í•´ index entryë¥¼ ì£¼ëŠ” ê²ƒì´ë‹¤. ì¦‰, ëª¨ë“  ë ˆì½”ë“œì— ëŒ€í•´ ìƒ‰ì¸ì„ ë§Œë“ ë‹¤.
>
> **Sparse index**ëŠ” ëª‡ëª‡ ê°’ì— ëŒ€í•´ì„œë§Œ entryë¥¼ ë§Œë“ ë‹¤. **ëŒ€ë¶€ë¶„ ê¸°ë³¸ì ìœ¼ë¡œ sparse indexë¥¼ ì‚¬ìš©**í•œë‹¤. Primary indexë„ sparse indexì´ë‹¤.

#### Problems
Primary indexì˜ í° ë¬¸ì œì ì€ **ìƒˆë¡œìš´ ë ˆì½”ë“œì˜ ì‚½ì…ê³¼ ì‚­ì œ**ë‹¤. ì‚½ì…í•˜ë ¤ë©´ ìƒˆ ë ˆì½”ë“œë¥¼ ë„£ê¸° ìœ„í•´ ë‹¤ë¥¸ ë ˆì½”ë“œë“¤ì„ ì˜®ê²¨ì¤˜ì•¼ í•  ë¿ë§Œ ì•„ë‹ˆë¼ index entryë„ ë³€ê²½í•´ì•¼í•œë‹¤. ì‚­ì œë„ ëª‡ëª‡ blockì˜ block anchorë¥¼ ë³€ê²½ì‹œí‚¬ ìˆ˜ ìˆë‹¤.

Insertion ë¬¸ì œëŠ” **'unordered overflow file'**ì„ ì‚¬ìš©í•´ì„œ í•´ê²°í•  ìˆ˜ ìˆë‹¤. Overflow ë ˆì½”ë“œë“¤ì˜ ì—°ê²° ë¦¬ìŠ¤íŠ¸ë¥¼ ê° blockë§ˆë‹¤ ë‘”ë‹¤.

Deletion ë¬¸ì œëŠ” **deletion marker**ë¡œ í•´ê²°í•  ìˆ˜ ìˆë‹¤.

### Clustering Index (êµ°ì§‘ ìƒ‰ì¸)
Non-key fieldì— ëŒ€í•œ ìƒ‰ì¸ì´ë‹¤. ì´ë•Œ ë°ì´í„° íŒŒì¼ì€ **clustered file**ì´ë‹¤.

Clustering indexë„ sparse indexë‹¤. **Clustering fieldì— ëŒ€í•´ ê°™ì€ ê°’**ì„ ê°€ì§€ëŠ” ë ˆì½”ë“œë“¤ì— ëŒ€í•´ ë¹ ë¥¸ ì ‘ê·¼ì„ ìœ„í•´ ë§Œë“¤ì–´ì§€ê¸° ë•Œë¬¸ì´ë‹¤.

ë‘ ê°€ì§€ fieldë¥¼ ê°€ì§„ ì •ë ¬ëœ íŒŒì¼ì„ ê°€ì§„ë‹¤.
- Clustering field of clustered file
- Pointer to disk block(ê°’ì´ ìµœì´ˆë¡œ ë‚˜íƒ€ë‚˜ëŠ” data blockì„ ê°€ë¦¬í‚¨ë‹¤)

#### Problems
Clustering index ë˜í•œ ë ˆì½”ë“œë¥¼ ì‚½ì…, ì‚­ì œí•  ë•Œ ë¬¸ì œê°€ ë°œìƒí•œë‹¤.

ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ block í•˜ë‚˜ë¥¼ í†µì©¨ë¡œ clustering fieldì˜ ê° ê°’ì— ëŒ€í•´ í• ë‹¹í•  ìˆ˜ ìˆë‹¤. Fieldì— ëŒ€í•´ ê°™ì€ ê°’ì„ ê°€ì§€ëŠ” ëª¨ë“  ë ˆì½”ë“œë“¤ì´ ê°™ì€ blockì— ìˆê²Œ ëœë‹¤.

![Clustering Index](https://www.cs.uct.ac.za/mit_notes/database/htmls/media/chp11_8.png)

### Secondary Index (ë³´ì¡° ìƒ‰ì¸)
Non-ordering fieldì— ëŒ€í•œ ìƒ‰ì¸ì´ë‹¤. ë°ì´í„° íŒŒì¼ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ë³´ì¡°ì ì¸ ìˆ˜ë‹¨ì„ ì œê³µí•œë‹¤. ë³´ì¡°ì ì¸ ìˆ˜ë‹¨ì´ê¸° ë•Œë¬¸ì— ë°ì´í„° ë ˆì½”ë“œì˜ ìˆœì„œëŠ” ì¤‘ìš”í•˜ì§€ ì•Šë‹¤.

ì¤‘ë³µë˜ëŠ” ê°’ì„ ê°€ì§€ëŠ” fieldì—ë„ ìƒì„±í•  ìˆ˜ ìˆê³ , uniqueí•œ ê°’ì„ ê°€ì§€ëŠ” fieldì—ë„ ìƒì„±í•  ìˆ˜ ìˆë‹¤. ë˜í•œ, ê°™ì€ ë°ì´í„° íŒŒì¼ì— ëŒ€í•´ ì—¬ëŸ¬ ë³´ì¡° ìƒ‰ì¸ì„ ìƒì„±í•  ìˆ˜ ìˆë‹¤. ë§ê·¸ëŒ€ë¡œ ì¶”ê°€ì ì¸ ìˆ˜ë‹¨ì´ê¸° ë•Œë¬¸ì´ë‹¤.

Secondary index ë˜í•œ ë‘ ê°€ì§€ fieldë¥¼ ê°€ì§„ë‹¤.
- Indexing field
- Pointer
    - to record: Uniqueí•œ ê°’ì„ ê°€ì§€ëŠ” fieldì— ìƒì„±í•˜ê²Œ ë  ê²½ìš° dense indexê°€ ëœë‹¤. ì¦‰, í¬ì¸í„°ëŠ” ê° ë ˆì½”ë“œë¥¼ ê°€ë¦¬í‚¨ë‹¤.
    - to block

![Secondary Index - dense](https://user-images.githubusercontent.com/33976823/144253875-b2a1b48c-d6fc-499f-8639-144333fc460a.png)

### Summary
![Summary](https://user-images.githubusercontent.com/33976823/144254390-0ffe53dd-72d0-4366-a5bf-0dd688faec27.png)

## Multilevel Indexes
