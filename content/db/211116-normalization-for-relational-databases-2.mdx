---
title: "Normalization for Relational DB - 2"
date: "2021-11-16"
emoji: "ğŸ™"
category: "db"
---
## Functional Dependency(í•¨ìˆ˜ ì¢…ì†ì„±)
FD(Functional Dependency)ëŠ” ë‘ ì†ì„± ì§‘í•©ê°„ ì œì•½ì¡°ê±´ì´ë‹¤. ê´€ê³„í˜• ë””ìì¸ì´ ì˜ëëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆëŠ” **í˜•ì‹ì  ì²™ë„(formal measures)ë¡œ ì‚¬ìš©**ëœë‹¤.

í‚¤(key)ëŠ” ê´€ê³„ì˜ ì •ê·œí˜•(normal form)ì„ ì •ì˜í•˜ëŠ”ë° ì‚¬ìš©ëœë‹¤.

ë‘ ì†ì„± ì§‘í•© $X$ì™€ $Y$ ì‚¬ì´ì˜ í•¨ìˆ˜ ì¢…ì†ì„±($X\rarr Y$)ì€ relational state $r$ì„ í˜•ì„±í•  ìˆ˜ ìˆëŠ” ëª¨ë“  íŠœí”Œì— ëŒ€í•œ ì œì•½ì¡°ê±´ì„ ì§€ì •í•œë‹¤.

ì–´ëŠ íŠœí”Œì´ë¼ë„, $r(R)$ì— ìˆëŠ” $t_1$ê³¼ $t_2$ê°€ $t_1[X]=t_2[X]$ë¥¼ ê°€ì§€ë©´, ë¬´ì¡°ê±´ $t_1[Y]=t_2[Y]$ë¥¼ ê°€ì ¸ì•¼í•œë‹¤. ì¦‰, $X\rarr Y$ëŠ” **ì–´ëŠ íŠœí”Œì´ë˜ $X$ì— ëŒ€í•´ ë˜‘ê°™ì€ ê°’ì„ ê°€ì§€ë©´, $Y$ì— ëŒ€í•´ì„œë„ ê°™ì€ ê°’**ì„ ê°€ì ¸ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ë‚˜íƒ€ë‚¸ë‹¤.

> ì˜ˆ) ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸ $\rarr$ {ì´ë¦„, ì„±ë³„}

ì´ ì œì•½ì¡°ê±´ì€ ëª¨ë“  relation ì¸ìŠ¤í„´ìŠ¤ $r(A)$ì— ëŒ€í•´ ì ìš©ë˜ì–´ì•¼ í•œë‹¤. ì£¼ì˜í•´ì•¼í•  ì ì€ $X\rarr Y$ë¼ê³  $Y\rarr X$ ì´ ì„±ë¦½ë˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.

### FD ì •ì˜í•˜ê¸°
FDë¥¼ ì •ì˜í•˜ê¸° ìœ„í•´ì„œëŠ” ì†ì„±ë“¤ì˜ ì˜ë¯¸ì™€ ì†ì„±ë“¤ê°„ì˜ ê´€ê³„ë¥¼ ì´í•´í•´ì•¼ í•œë‹¤. 
FDëŠ” ì†ì„±ë“¤ì˜ ì˜ë¯¸ë¥¼ ì•„ëŠ” ì‚¬ëŒì´ ëª…ì‹œì ìœ¼ë¡œ ì •ì˜í•´ì•¼ í•œë‹¤.

![FD](https://user-images.githubusercontent.com/33976823/141867491-1e4fdd08-7986-4e9d-b363-c2f5354368be.png)

## Normal Forms based on Primary Keys(PKs)
Relationsì˜ ì •ê·œí™”ëŠ” ê´€ê³„ ìŠ¤í‚¤ë§ˆì— ëŒ€í•œ ì¼ë ¨ì˜ í…ŒìŠ¤íŠ¸ë¥¼ ê±°ì³ íŠ¹ì • ì •ê·œí˜•ì„ ë§Œì¡±í•˜ëŠ”ì§€ ê²€ì¦í•œ í›„, 'ë‚˜ìœ' relationë“¤ì„ **ë” ì‘ì€ relationë“¤ë¡œ ë¶„í•´**í•˜ë©´ì„œ ì´ë£¨ì–´ì§„ë‹¤.

ë°˜ëŒ€ë¡œ **ë¹„ì •ê·œí™”(Denormalization)**ì€ ìƒìœ„ ì •ê·œí˜• relationì˜ ì¡°ì¸ì„ í•˜ìœ„ ì •ê·œí˜• relationì˜ base relationìœ¼ë¡œ ì €ì¥í•˜ëŠ” ê²ƒì´ë‹¤.

### Normal Form(NF)
Relationì˜ **í‚¤(keys)ì™€ FDë“¤ì„ ì´ìš©í•œ ì¡°ê±´**ì„ í†µí•´ ê´€ê³„ ìŠ¤í‚¤ë§ˆê°€ íŠ¹ì • ì •ê·œí˜•ì— í•´ë‹¹í•˜ëŠ”ì§€ ê²€ì¦í•  ìˆ˜ ìˆë‹¤. Relationì´ ë§Œì¡±í•˜ëŠ” ê°€ì¥ ë†’ì€ ì¡°ê±´ì´ NF ë ˆë²¨ì´ ëœë‹¤.

NFì˜ ë ˆë²¨ì—ëŠ” 1NF, 2NF, 3NF, Bocye-Codd NF(BCNF), 4NF, 5NF ë“±ì´ ìˆë‹¤. ë³´í†µ 3NFë‚˜ BCNFê¹Œì§€ë§Œ ì •ê·œí™”í•œë‹¤.

### First Normal Form(1NF)
1NFëŠ” relationì´ ê¸°ë³¸ì ì¸ ê´€ê³„í˜• ëª¨ë¸ê°€ì§€ë©´ ìì—°ìŠ¤ëŸ½ê²Œ ì¶©ì¡±ëœë‹¤.

ì•„ë˜ ì‚¬í•­ë“¤ì„ ê°€ì§€ì§€ ì•Šìœ¼ë©´ ëœë‹¤.
- Composite attributes
- Multi-valued attributes(MVAs)
- Nested relations(NRs)

#### MVAë¥¼ ì œê±°í•˜ëŠ” 3ê°€ì§€ ë°©ë²•
- ë‹¤ë¥¸ relationìœ¼ë¡œ ë¶„ë¦¬í•œë‹¤.
- MVAë¥¼ Keyì— í¬í•¨ì‹œì¼œì„œ ê°ê° ë‹¤ë¥¸ íŠœí”Œë¡œ ë¶„ë¦¬í•œë‹¤.
- MVAì˜ ìµœëŒ€ ìˆ˜ mì„ ì•Œë©´, MVAë¥¼ mê°œì˜ ì†ì„±ìœ¼ë¡œ ëŒ€ì²´í•œë‹¤.

NRë„ MVAì™€ ë™ì¼í•˜ê²Œ ì œê±°í•˜ë©´ ëœë‹¤.

> **Prime attribute**: **í›„ë³´ í‚¤**ì˜ ì¼ì›ì´ì–´ì•¼ í•œë‹¤.
>
> Nonprime attribute: Prime attributeê°€ ì•„ë‹Œ ê²ƒ. ì–´ëŠ í›„ë³´í‚¤ì—ë„ ì†í•˜ë©´ ì•ˆëœë‹¤.

### Second Normal Form(2NF)
**Full functional dependency**ì— ê¸°ë°˜ì„ ë‘”ë‹¤. FD $X\rarr Y$ëŠ” $X$ì˜ ì–´ëŠ ì†ì„± $A$ë¼ë„ ì œê±°í•˜ëŠ” ê²ƒì´ dependencyë¥¼ ìœ ì§€í•˜ì§€ ëª»í•˜ê²Œ ëœë‹¤ë©´ FFDì´ë‹¤.
ë‹¤ë¥¸ ë§ë¡œ í•˜ë©´, $X-\{A\}$ì´ë©´ $X$ê°€ $Y$ë¥¼ í•¨ìˆ˜ì ìœ¼ë¡œ ê²°ì •í•˜ì§€ ëª»í•œë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.

**ëª¨ë“  nonprime attribute $A$ê°€ PK(ê¸°ë³¸ í‚¤)ì— ëŒ€í•´ì„œ 'fully functionally dependent'**í•˜ë‹¤ë©´ ê·¸ relationì€ 2NFì— ìˆë‹¤ê³  ì •ì˜í•œë‹¤.

![image](https://user-images.githubusercontent.com/33976823/141880397-448f7064-2f30-4ddd-93ac-cf6141602521.png)

### Third Normal Form(3NF)
**Transitive functional dependency**ì— ê¸°ë°˜ì„ ë‘”ë‹¤. FD $X\rarr Z$ê°€ ë‘ FD $X\rarr Y$, $Y\rarr Z$ë¡œë¶€í„° ìœ ë„ë  ìˆ˜ ìˆë‹¤ë©´ 'transitive functional dependency'ë¥¼ ê°€ì§„ë‹¤. ì—¬ê¸°ì„œ $Y$ëŠ” nonprime attributeì´ë‹¤.

Relationì´ **2NFë¥¼ ë§Œì¡±í•˜ê³  ëª¨ë“  nonprime attributeê°€ PKì— ëŒ€í•´ì„œ 'transitively dependent'í•˜ì§€ ì•Šë‹¤ë©´** ê·¸ relationì€ 3NFì— ìˆë‹¤ê³  ì •ì˜í•œë‹¤.

![image](https://user-images.githubusercontent.com/33976823/141881793-b5ef5770-fe12-4e0f-b915-078f6613df23.png)

## ì •ë¦¬
- **1NF**: í‚¤ ì¼ë¶€ ë˜ëŠ” ì „ì²´ì— ëŒ€í•´ì„œ ì˜ì¡´. FD ì—†ìŒ.

- **2NF**: í‚¤ ì „ì²´ì— ëŒ€í•´ì„œ ì˜ì¡´. ë‹¨, transitive propertyì— ì˜í•´, ë‹¤ë¥¸ nonprime attributeì— ëŒ€í•œ ì˜ì¡´ì„±ì€ ìˆì„ ìˆ˜ ìˆë‹¤.

- **3NF**: ëª¨ë“  ì†ì„±ì´ í‚¤ ì™¸ì—ëŠ” ì˜ì¡´í•˜ì§€ ì•ŠëŠ”ë‹¤.

FDì˜ ì™¼ìª½ì— nonkey ì†ì„±ì´ ìˆìœ¼ë©´ FDëŠ” ë¬¸ì œë¥¼ ì¼ìœ¼í‚¬ ìˆ˜ ìˆë‹¤.