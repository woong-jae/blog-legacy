---
title: "ë²ˆë“¤ ë¶„ì„ìœ¼ë¡œ CRA ì„±ëŠ¥ ê°œì„ í•˜ê¸°"
date: "2022-10-04 09:15"
emoji: "ğŸ”"
category: "projects"
---

## ë¬¸ì œì 

![algong-lighthouse-performance](https://user-images.githubusercontent.com/33976823/193708185-3162c46f-1726-4a9c-8dd2-09eefd32e7dd.png)

ê¸°ëŠ¥ êµ¬í˜„ì´ ê±°ì˜ ì™„ë£Œëœ SPAì˜ ë©”ì¸í™”ë©´ì„ lighthouseë¡œ ë¶„ì„í–ˆë‹¤. ê·¸ ê²°ê³¼ largest contentful paint(LCP)ì™€ total blocking timeì´ ì•ˆì¢‹ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆì—ˆë‹¤.

LCPê°€ ì €í•˜ë˜ëŠ” ì›ì¸ì€ ëŠë¦° ì„œë²„ ì‘ë‹µì‹œê°„, ìë°”ìŠ¤í¬ë¦½íŠ¸ì™€ css ë Œë” ë¸”ë¡œí‚¹, ëŠë¦° ë¦¬ì†ŒìŠ¤ ë¡œë”© ì‹œê°„, í´ë¼ì´ì–¸íŠ¸ ì¸¡ ë Œë”ë§ì´ ìˆë‹¤. ì´ ì¤‘ì—ì„œë„ í´ë¼ì´ì–¸íŠ¸ ì¸¡ ë Œë”ë§ì´ í˜„ì¬ ê°€ì¥ í° ì›ì¸ì´ë¼ê³  íŒë‹¨í–ˆë‹¤. SPAì˜ ì»¤ë‹¤ë€ ìë°”ìŠ¤í¬ë¦½íŠ¸ ë²ˆë“¤ì„ ìµœì í™”í•œë‹¤ë©´ ì˜ë¯¸ìˆëŠ” ì„±ëŠ¥ í–¥ìƒì„ ì–»ì„ ìˆ˜ ìˆì„ ê²ƒ ê°™ì•˜ë‹¤.

í´ë¼ì´ì–¸íŠ¸ ì¸¡ ë Œë”ë§ì„ ìµœì í™”í•˜ê¸° ìœ„í•´ ë‹¤ìŒ ì‚¬í•­ë“¤ì„ ê³ ë ¤í•  ìˆ˜ ìˆë‹¤.

- ì¤‘ìš” JavaScript ìµœì†Œí™”: JavaScript ì¶•ì†Œ, ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” JavaScript ì§€ì—° ë“±ìœ¼ë¡œ ìµœì í™” í•  ìˆ˜ ìˆë‹¤.
- ì„œë²„ì¸¡ ë Œë”ë§ ì‚¬ìš©: Next.jsì™€ ê°™ì€ í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•´ ì£¼ìš” ì½˜í…ì¸ ë¥¼ ì„œë²„ì—ì„œ ë Œë”ë§í•˜ë„ë¡ í•˜ëŠ” ë°©ë²•ì„ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ, ëŒ€ê·œëª¨ ì½”ë“œ ë³€ê²½ì´ í•„ìš”í•´ ê³ ë ¤í•˜ì§€ ì•Šì•˜ë‹¤.

JavaScript ìµœì†Œí™”ë¥¼ ìœ„í•´ ë¨¼ì € ë²ˆë“¤ ë¶„ì„ì„ í–ˆë‹¤.

### í•´ê²°ê¸°

'webpack-bundle-analyzer' í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•˜ë©´ ë¹Œë“œëœ ë²ˆë“¤ì„ ë¶„ì„í•  ìˆ˜ ìˆë‹¤. ì•±ì„ CRAë¡œ ë§Œë“¤ì–´ì„œ `eject` ì—†ì´ ì‚¬ìš©í•˜ê¸° ìœ„í•´ `cra-bundle-analyzer`ë¥¼ ì‚¬ìš©í–ˆë‹¤.

ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ì•˜ë‹¤.

![bundle-before](https://user-images.githubusercontent.com/33976823/193708285-e50685e5-667d-4214-ada5-66d36917d136.png)

ë©”ì¸ì´ ë¬´ë ¤ 5.3MBë‚˜ ëœë‹¤. ê·¸ ì¤‘ `@codemirror`ë€ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ê±°ì˜ 1MBë¥¼ ì°¨ì§€í•˜ê³  ìˆì—ˆë‹¤. ë©”ì¸í™”ë©´ì—ì„œëŠ” ì‚¬ìš©í•˜ì§€ë„ ì•ŠëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ë° ë§ì´ë‹¤.

mainì„ ì¢€ ë” ê°€ë³ê²Œ í•˜ê¸°ìœ„í•´ code splittingì„ í–ˆë‹¤. Codemirrorë¥¼ ì‚¬ìš©í•˜ëŠ” í˜ì´ì§€ë“¤ì„ `lazy`ì™€ `Suspense`ë¥¼ ì‚¬ìš©í•´ í•„ìš”í• ë•Œë§Œ ë¶ˆëŸ¬ì˜¤ëŠ” ê²ƒì´ë‹¤.

```tsx
// ...
const Solve = lazy(() => import("./components/pages/Solve"));
const Solution = lazy(() => import("./components/pages/Solution"));
// ...
function App() {
	return (
		<QueryClientProvider client={queryClient}>
			<BrowserRouter>
				<Suspense fallback={<Loading />}>
					{...}
				</Suspense>
			</BrowserRouter>
		</QueryClientProvider>
	);
}
```

ì´ê²ƒë§Œ ë³€ê²½í•˜ê³  ë‹¤ì‹œ í™•ì¸í•´ë´¤ë‹¤. ê²°ê³¼ëŠ” ë†€ë¼ì› ë‹¤.

![bundle-after](https://user-images.githubusercontent.com/33976823/193708288-c0fd4d0a-15fd-4119-9b28-c79d44f2028d.png)
![algong-lighthouse-performance-after](https://user-images.githubusercontent.com/33976823/193708294-a63e6f4e-0824-430e-b4de-ee30cc2caa36.png)

mainì˜ í¬ê¸°ë¥¼ 2.2MBë¡œ ê±°ì˜ ì ˆë°˜ìœ¼ë¡œ ì¤„ì¼ ìˆ˜ ìˆì—ˆë‹¤. LCPì™€ ë¸”ë½í‚¹ íƒ€ì„ë„ ê°œì„ ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

<br />

ì°¸ì¡°:
* [ìµœëŒ€ ì½˜í…ì¸ í’€ í˜ì¸íŠ¸ ìµœì í™”](https://web.dev/optimize-lcp/#reduce-javascript-blocking-time)