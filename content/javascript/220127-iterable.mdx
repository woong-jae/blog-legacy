---
title: "[JS] Iterable(ì´í„°ëŸ¬ë¸”)" 
date: "2022-01-27"
emoji: "ğŸ’§"
category: "javascript"
---
Iterable, í•œêµ­ì–´ë¡œ 'ë°˜ë³µ ê°€ëŠ¥í•œ'ì´ë¼ëŠ” ëœ»ì„ ê°€ì§„ ê°ì²´ëŠ” ë°°ì—´ì„ ì¼ë°˜í™”í•œ ê°ì²´ë‹¤. ì´ ê°œë…ì„ ì‚¬ìš©í•˜ë©´ **ì–´ëŠ ê°ì²´ì—ë“  `for..of` ë¬¸ì„ ì‚¬ìš©**í•  ìˆ˜ ìˆë‹¤.

ë°°ì—´ê³¼ ë¬¸ìì—´ì´ ëŒ€í‘œì ì¸ iterableì´ë‹¤.

## Symbol.iterable
ì–´ë–¤ ê°ì²´ë¥¼ iterableë¡œ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” **ê°ì²´ì— `Symbol.iterator`ë¼ëŠ” ë©”ì„œë“œë¥¼ ì¶”ê°€**í•´ ì•„ë˜ì™€ ê°™ì€ ì¼ì´ ë²Œì–´ì§€ê²Œ í•´ì•¼í•œë‹¤.

1. `for..of`ë¥¼ í˜¸ì¶œí•˜ë©´, `for..of`ëŠ” `Symbol.iterator`ë¥¼ í˜¸ì¶œí•œë‹¤(ì—†ìœ¼ë©´ ì—ëŸ¬ë°œìƒ). `Symbol.iterator`ëŠ” ë°˜ë“œì‹œ **iterator(ë©”ì„œë“œ `next()`ê°€ ìˆëŠ” ê°ì²´)ë¥¼ ë°˜í™˜**í•´ì•¼ í•œë‹¤.

2. `for..of`ëŠ” ë°˜í™˜ëœ iteratorë¥¼ ëŒ€ìƒìœ¼ë¡œ ì‘ë™í•œë‹¤.

3. `for..of`ì—ì„œ ë‹¤ìŒ ê°’ì´ í•„ìš”í•˜ë©´, `for..of`ëŠ” iteratorì˜ `next()`ë¥¼ í˜¸ì¶œí•œë‹¤.

4. `next()`ì˜ ë°˜í™˜ê°’ì€ `{ done: Boolean, value: any }`ì˜ í˜•íƒœë¥¼ ê°€ì ¸ì•¼í•œë‹¤. `done`ì€ ë°˜ë³µì´ ëë‚¬ëŠ”ì§€ ì—¬ë¶€ë¥¼ ì•Œë ¤ì¤€ë‹¤. `done`ì´ `false`ë©´ `value`ì— ë‹¤ìŒ ê°’ì´ ì €ì¥ëœë‹¤.

```js
// 1ë²ˆ ë°©ì‹
let range = {
    from: 1,
    to: 5,
};
range[Symbol.iterator] = function () {
    return {
        current: this.from,
        last: this.to,
        next() {
            if(this.current <= this.last) return { done: false, value: this.current++ };
            else return { done: true };
        }
    }
}
// 2ë²ˆ ë°©ì‹
let range = {
    from: 1,
    to: 5,
    [Symbol.iterator]() {
        this.current = this.from;
        return this;
    },
    next() {
        if(this.current <= this.to) return { done: false, value: this.current++ };
        else return { done: true };
    }
}

for (const num of range) {
    console.log(num);
}
// -> 1, 2, 3, 4, 5
```

1ë²ˆ ë°©ì‹ê³¼ 2ë²ˆ ë°©ì‹ì˜ ì°¨ì´ì ì€ 'ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬(Seperate of Concern, SoC)'ë‹¤.

1ë²ˆ ë°©ì‹ì—ì„œëŠ” rangeê°€ ë‚´ë¶€ì ìœ¼ë¡œ ë©”ì„œë“œ `next()`ë¥¼ ê°€ì§€ì§€ ì•ŠëŠ”ë‹¤. ëŒ€ì‹  `range[Symbol.iterator]()`ë¥¼ í˜¸ì¶œí•´ì„œ ë§Œë“  iterator ê°ì²´ì™€ ì´ ê°ì²´ì˜ `next()`ì—ì„œ ë°˜ë³µì— ì‚¬ìš©ë  ê°’ì„ ë§Œë“¤ì–´ë‚¸ë‹¤.
ì´ë ‡ê²Œ í•¨ìœ¼ë¡œì¨ iterator ê°ì²´ì™€ ëŒ€ìƒ ê°ì²´ë¥¼ ë¶„ë¦¬í•  ìˆ˜ ìˆë‹¤.

2ë²ˆ ë°©ì‹ì€ `range[Symbol.iterator]()`ê°€ ëŒ€ìƒ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤. ë°˜í™˜ëœ ê°ì²´ì—ëŠ” `next()`ë„ ìˆê³  `this.current`ì— ë°˜ë³µì´ ì–¼ë§ˆë‚˜ ì§„í–‰ë˜ì—ˆëŠ”ì§€ ë‚˜íƒ€ë‚´ëŠ” ê°’ë„ ì €ì¥ë˜ì–´ ìˆë‹¤. `range` ìì²´ê°€ iteratorê°€ ëœ ê²ƒì´ë‹¤.

IteratorëŠ” ëª…ì‹œì ìœ¼ë¡œ í˜¸ì¶œí•  ìˆ˜ë„ ìˆë‹¤.
```js
let str = "Hello";
let iterator = str[Symbol.iterator]();
while(true) {
    let result = iterator.next();
    if(result.done) break;
    console.log(result.value);
}
// -> H, e, l, l, o
```

### async ì´í„°ë ˆì´í„°
ë¹„ë™ê¸° ì´í„°ë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ë©´ ë¹„ë™ê¸°ì ìœ¼ë¡œ ë“¤ì–´ì˜¤ëŠ” ë°ì´í„°ë¥¼ í•„ìš”ì— ë”°ë¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.
ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ ë°ì´í„°ê°€ ì—¬ëŸ¬ ë²ˆì— ê±¸ì³ ë“¤ì–´ì˜¤ëŠ” ìƒí™©ì„ ì²˜ë¦¬í•  ë•Œ ìœ ìš©í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

ë¹„ë™ê¸° ì´í„°ë ˆì´í„°ëŠ” `Symbol.iterator` ëŒ€ì‹ , `Symbol.asyncIterator`ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤. ê·¸ë¦¬ê³  `next()`ëŠ” í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•´ì•¼ í•œë‹¤.
```js
let range = {
    from: 1,
    to: 5,
    [Symbol.asyncIterator]() {
        return {
            current: this.from,
            last: this.to,
            async next() {
                await new Promise(resolve => setTimeout(resolve, 1000));

                if(this.current <= this.last) return { done: false, value: this.current++ };
                else return { done: true };
            }
        }
    }
}
(async () => {
  for await (let value of range) {
    console.log(value);
  }
})();
// -> 1, 2, 3, 4, 5 ê°€ 1ì´ˆ ê°„ê²©ìœ¼ë¡œ ì¶œë ¥
```

## Iterableê³¼ ìœ ì‚¬ ë°°ì—´
- **Iterable**ì€ `Symbol.iterator` ë©”ì„œë“œê°€ êµ¬í˜„ëœ ê°ì²´ë‹¤.

- **ìœ ì‚¬ ë°°ì—´(Array-like)**ëŠ” ì¸ë±ìŠ¤ì™€ `length` í”„ë¡œí¼í‹°ê°€ ìˆì–´ ë°°ì—´ì²˜ëŸ¼ ë³´ì´ëŠ” ê°ì²´ë‹¤.

```js
let arrayLike = {
    0: "ì•ˆ",
    1: "ë…•",
    length: 2
};

for (const item of arrayLike) {}
// -> ì—ëŸ¬ ë°œìƒ
```

ë¬¸ìì—´ì€ iterableì´ë©´ì„œ ìœ ì‚¬ ë°°ì—´ì¸ ê°ì²´ë‹¤.

Iterableê³¼ ìœ ì‚¬ë°°ì—´ì„ ë°°ì—´ì²˜ëŸ¼, ì¦‰ ë°°ì—´ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ì„ ë•Œ `Array.from`ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

### Array.from
`Array.from`ì€ iterableì´ë‚˜ ìœ ì‚¬ ë°°ì—´ì„ ë°›ì•„ 'ì§„ì§œ' ë°°ì—´ì„ ë§Œë“¤ì–´ì¤€ë‹¤. ì´ ê³¼ì •ì„ í†µí•´ iterableì´ë‚˜ ìœ ì‚¬ ë°°ì—´ì— ë°°ì—´ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```js
let arrayLike = {
    0: "ì•ˆ",
    1: "ë…•",
    length: 2
};

let array = Array.from(arrayLike);
console.log(array.pop());
// -> "ë…•"
```

7ë²ˆ ì¤„ì˜ `Array.from`ì€ ê°ì²´ë¥¼ ë°›ì•„ iterableì´ë‚˜ ìœ ì‚¬ ë°°ì—´ì¸ì§€ ê²€ì‚¬í•œë‹¤. ë„˜ê²¨ ë°›ì€ ì¸ìˆ˜ê°€ iterableì´ë‚˜ ìœ ì‚¬ ë°°ì—´ì¸ ê²½ìš°, ìƒˆë¡œìš´ ë°°ì—´ì„ ë§Œë“¤ê³  ê°ì²´ì˜ ëª¨ë“  ìš”ì†Œë¥¼ ìƒˆë¡­ê²Œ ë§Œë“  ë°°ì—´ë¡œ ë³µì‚¬í•œë‹¤.

`Array.from`ì—ëŠ” ë§¤í•‘ í•¨ìˆ˜ë¥¼ ì„ íƒì ìœ¼ë¡œ ë„˜ê²¨ì¤„ ìˆ˜ ìˆë‹¤. `arr.map()`ê³¼ ë¹„ìŠ·í•˜ê²Œ ìš”ì†Œë¥¼ ì¶”ê°€í•˜ê¸° ì „ì— ê° ìš”ì†Œë¥¼ ëŒ€ìƒìœ¼ë¡œ ë§¤í•‘ì„ í•´ì¤€ë‹¤.
```js
let array = Array.from(range, num => num * num);
console.log(array);
// -> [1, 4, 9, 16, 25]
```

`Array.from`ì€ `str.split`ê³¼ ë‹¤ë¥´ê²Œ ë¬¸ìì—´ ìì²´ê°€ ê°€ì§„ iterable í”„ë¡œí¼í‹°ë¥¼ ì´ìš©í•´ ë™ì‘í•œë‹¤. ë”°ë¼ì„œ **`for..of`ì²˜ëŸ¼ ì„œë¡œê²Œì´íŠ¸ ìŒì—ë„ ì œëŒ€ë¡œ ì ìš©**ëœë‹¤.
```js
let str = 'ğ’³ğŸ˜‚';

console.log(Array.from(str));
// -> ["ğ’³", "ğŸ˜‚"]
console.log(str.split(''));
// -> ["ï¿½", "ï¿½", "ï¿½", "ï¿½"]
```

ì´ê²ƒì„ ì´ìš©í•´ì„œ ì„œë¡œê²Œì´íŠ¸ ìŒì„ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” `slice`ë¥¼ ì§ì ‘ êµ¬í˜„í•  ìˆ˜ë„ ìˆë‹¤.
```js
function slice(str, start, end) {
    return Array.from(str).slice(start, end).join('');
}
```

<br/>

ì°¸ì¡°: ko.javascript.info