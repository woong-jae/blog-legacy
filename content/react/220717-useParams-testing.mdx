---
title: "[React Router] useParams í…ŒìŠ¤íŠ¸í•˜ê¸°"
date: "2022-07-17 22:48"
emoji: "ğŸŒ¡"
category: "react"
---

> React router v6ì™€ testing libraryë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì‘ì„±ëìŠµë‹ˆë‹¤.

`useParams`ëŠ” í˜„ì¬ urlì—ì„œ `<Route path>`ì™€ ì¼ì¹˜í•˜ëŠ” key/value ìŒì„ ë°˜í™˜í•´ì£¼ëŠ” í›…ì´ë‹¤.
ê³µì‹ ë¬¸ì„œì˜ ì˜ˆì œëŠ” ì•„ë˜ì™€ ê°™ë‹¤.

```jsx
import * as React from 'react';
import { Routes, Route, useParams } from 'react-router-dom';

function ProfilePage() {
  // Get the userId param from the URL.
  let { userId } = useParams();
  // ...
}

function App() {
  return (
    <Routes>
      <Route path="users">
        <Route path=":userId" element={<ProfilePage />} />
        <Route path="me" element={...} />
      </Route>
    </Routes>
  );
}
```

ë§Œì•½ í˜„ì¬ urlì´ "/users/1234"ì´ë©´ `ProfilePage`ì˜ `userId`ë¡œ `1234`ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤.

`useParams`ëŠ” ì‚¬ìš©ìë§ˆë‹¤ ê°œì¸í™”ëœ ë‚´ìš©ì„ ë³´ì—¬ì£¼ê¸° ì•„ì£¼ ì¢‹ì€ ê¸°ëŠ¥ì´ì§€ë§Œ, ì´ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ í…ŒìŠ¤íŒ… í•  ë•ŒëŠ” ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ?

## MemoryRouter
`MemoryRouter`ëŠ” ìœ„ì¹˜ë¥¼ **ë‚´ë¶€ì ìœ¼ë¡œ ì €ì¥**í•˜ëŠ” ë¼ìš°í„°ë‹¤.

`BroswerRouter`ì™€ëŠ” ë‹¤ë¥´ê²Œ, ë¸Œë¼ìš°ì €ì˜ history stackê³¼ ê°™ì€ ì™¸ë¶€ì ì¸ ìš”ì†Œì™€ ì—°ê²°ë˜ì§€ ì•ŠëŠ”ë‹¤.
ê·¸ë ‡ê¸° ë•Œë¬¸ì— `MemoryRouter`ëŠ” history stackì„ ì§ì ‘ ì œì–´í•´ì•¼í•˜ëŠ” í…ŒìŠ¤íŒ…ê°™ì€ ìƒí™©ì— ì‚¬ìš©í•˜ê¸° ìµœì í™” ëœ ë¼ìš°í„°ë‹¤.

ëŒ€ë¶€ë¶„ì˜ React routerì˜ í…ŒìŠ¤íŠ¸ë„ `MemoryRouter`ë¡œ ì‘ì„±ëë‹¤ê³  í•˜ë‹ˆ, ìš°ë¦¬ë„ í…ŒìŠ¤íŒ…ì„ ìœ„í•´ ì‚¬ìš©í•´ë³´ì.

ì‚¬ìš©ë²•ì€ ê°„ë‹¨í•˜ë‹¤. `BroswerRouter`ë¥¼ `MemoryRouter`ë¡œ ì¹˜í™˜í•˜ê³ , propìœ¼ë¡œ `initialEntries={[route]}`ë¥¼ ì£¼ë©´ ëœë‹¤.

ë§Œì•½ ìœ„ì˜ ì˜ˆì‹œì˜ `<ProfilePage />`ë¥¼ í…ŒìŠ¤íŠ¸í•œë‹¤ê³  í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.
```tsx
test("renders correctly", () => {
  render(
    <MemoryRouter initialEntries={["/users/1234"]}>
      <Routes>
        <Route path="/users/:userId" element={<ProfilePage />} />
      </Routes>
    </MemoryRouter>
  );

  // ...
})
```

React routerì— ì˜ì¡´í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ë§ì€ ê²½ìš° ìœ„ì˜ ì½”ë“œë¥¼ ì¼ì¼íˆ ì‘ì„±í•˜ëŠ” ê²ƒì€ ì—„ì²­ ë¶ˆí¸í•˜ë‹¤.

ìš°ë¦¬ì˜ ì†ëª© ê±´ê°•ì„ ì§€ì¼œì¤„ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë¥¼ ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.

```tsx
// renderWithRouterMatch.tsx
import { render } from "@testing-library/react";
import { Route, MemoryRouter, Routes } from "react-router-dom";

export function renderWithRouterMatch(
  ui: JSX.Element,
  { path = "/", route = "/" } = {}
) {
  return {
    ...render(
      <MemoryRouter initialEntries={[route]}>
        <Routes>
          <Route path={path} element={ui} />
        </Routes>
      </MemoryRouter>
    ),
  };
}
```

ì´ì œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í›¨ì”¬ ì†ì‰½ê²Œ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.

```tsx
test("renders correctly", () => {
  renderWithRouterMatch(
    <ProfilePage />,
    {
      path: "/users/:userId",
      route: "/users/1234"
    }
  );

  //...
})
```

## ë§ˆì¹˜ë©°
ì´í‹€ ì „ì— í…ŒìŠ¤íŠ¸ ì½”ë“œë€ ê²ƒì„ íƒœì–´ë‚˜ì„œ ì²˜ìŒ ì‘ì„±í•´ë´¤ë‹¤.
ì„œë²„ ëª¨í‚¹ì— ì •ì‹ ì´ íŒ”ë ¤ì„œì¸ì§€... í…ŒìŠ¤íŠ¸í•˜ë ¤ë˜ ì»´í¬ë„ŒíŠ¸ê°€ react routerì™€ ì˜ì¡´ì„±ì´ ìˆëŠ” ê²ƒì„ ê¹œë¹¡í•˜ê³  í•˜ë£¨ì¢…ì¼ ì‚½ì§ˆì„ í–ˆë‹¤.
ê·¸ë˜ë„ ë’¤ëŠ¦ê²Œ `useParams` ë•Œë¬¸ì¸ ê²ƒì„ í™•ì¸í•˜ê³  ë ˆí¼ëŸ°ìŠ¤ì™€ ê³µì‹ ë¬¸ì„œë¡œ ë¹ ë¥´ê²Œ í•´ê²°í•  ìˆ˜ ìˆì—ˆë‹¤.

ì„œë²„ ëª¨í‚¹ë„ ì¡°ë§Œê°„ ì •ë¦¬í•´ì„œ ì˜¬ë ¤ì•¼ê² ë‹¤.

<br/>

ì°¸ì¡°:
* [Mocking React Routerâ€™s match object in component unit tests](https://medium.com/@aarling/mocking-a-react-router-match-object-in-your-component-tests-fa95904dcc55)
* [React Router - MemoryRouter](https://reactrouter.com/docs/en/v6/routers/memory-router)  
* [Testing Library - React Router](https://testing-library.com/docs/example-react-router)